<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.key.dwsurvey.mapper.SurveyDirectoryMapper">
    <resultMap id="BaseResultMap" type="com.key.dwsurvey.entity.SurveyDirectory">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="an_item_least_num" property="anItemLeastNum" jdbcType="INTEGER"/>
        <result column="answer_num" property="answerNum" jdbcType="INTEGER"/>
        <result column="create_date" property="createDate" jdbcType="TIMESTAMP"/>
        <result column="dir_type" property="dirType" jdbcType="INTEGER"/>
        <result column="excerpt_num" property="excerptNum" jdbcType="INTEGER"/>
        <result column="html_path" property="htmlPath" jdbcType="VARCHAR"/>
        <result column="is_share" property="isShare" jdbcType="INTEGER"/>
        <result column="parent_id" property="parentId" jdbcType="VARCHAR"/>
        <result column="sid" property="sid" jdbcType="VARCHAR"/>
        <result column="survey_detail_id" property="surveyDetailId" jdbcType="VARCHAR"/>
        <result column="survey_model" property="surveyModel" jdbcType="INTEGER"/>
        <result column="survey_name" property="surveyName" jdbcType="VARCHAR"/>
        <result column="survey_qu_num" property="surveyQuNum" jdbcType="INTEGER"/>
        <result column="survey_state" property="surveyState" jdbcType="INTEGER"/>
        <result column="survey_tag" property="surveyTag" jdbcType="INTEGER"/>
        <result column="user_id" property="userId" jdbcType="VARCHAR"/>
        <result column="view_answer" property="viewAnswer" jdbcType="INTEGER"/>
        <result column="visibility" property="visibility" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, an_item_least_num, answer_num, create_date, dir_type, excerpt_num, html_path,
        is_share, parent_id, sid, survey_detail_id, survey_model, survey_name, survey_qu_num,
        survey_state, survey_tag, user_id, view_answer, visibility
    </sql>
    <select id="selectByPrimaryKey" resultType="com.key.dwsurvey.entity.SurveyDirectory"
            parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        *
        from t_survey_directory
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from t_survey_directory
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.key.dwsurvey.entity.SurveyDirectory">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <selectKey resultType="java.lang.String" keyProperty="id" order="BEFORE">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into t_survey_directory (id, an_item_least_num, answer_num,
        create_date, dir_type, excerpt_num,
        html_path, is_share, parent_id,
        sid, survey_detail_id, survey_model,
        survey_name, survey_qu_num, survey_state,
        survey_tag, user_id, view_answer,
        visibility)
        values (#{id,jdbcType=VARCHAR}, #{anItemLeastNum,jdbcType=INTEGER}, #{answerNum,jdbcType=INTEGER},
        #{createDate,jdbcType=TIMESTAMP}, #{dirType,jdbcType=INTEGER}, #{excerptNum,jdbcType=INTEGER},
        #{htmlPath,jdbcType=VARCHAR}, #{isShare,jdbcType=INTEGER}, #{parentId,jdbcType=VARCHAR},
        #{sid,jdbcType=VARCHAR}, #{surveyDetailId,jdbcType=VARCHAR}, #{surveyModel,jdbcType=INTEGER},
        #{surveyName,jdbcType=VARCHAR}, #{surveyQuNum,jdbcType=INTEGER}, #{surveyState,jdbcType=INTEGER},
        #{surveyTag,jdbcType=INTEGER}, #{userId,jdbcType=VARCHAR}, #{viewAnswer,jdbcType=INTEGER},
        #{visibility,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" parameterType="com.key.dwsurvey.entity.SurveyDirectory" useGeneratedKeys="true"
            keyProperty="id">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <selectKey resultType="java.lang.String" keyProperty="id" order="BEFORE">
            SELECT replace(uuid(),'-','')
        </selectKey>
        insert into t_survey_directory
        <trim prefix="(" suffix=")" suffixOverrides=",">
            id,
            <if test="anItemLeastNum != null">
                an_item_least_num,
            </if>
            <if test="answerNum != null">
                answer_num,
            </if>
            <if test="createDate != null">
                create_date,
            </if>
            <if test="dirType != null">
                dir_type,
            </if>
            <if test="excerptNum != null">
                excerpt_num,
            </if>
            <if test="htmlPath != null">
                html_path,
            </if>
            <if test="isShare != null">
                is_share,
            </if>
            <if test="parentId != null">
                parent_id,
            </if>
            <if test="sid != null">
                sid,
            </if>
            <if test="surveyDetailId != null">
                survey_detail_id,
            </if>
            <if test="surveyModel != null">
                survey_model,
            </if>
            <if test="surveyName != null">
                survey_name,
            </if>
            <if test="surveyQuNum != null">
                survey_qu_num,
            </if>
            <if test="surveyState != null">
                survey_state,
            </if>
            <if test="surveyTag != null">
                survey_tag,
            </if>
            <if test="userId != null">
                user_id,
            </if>
            <if test="viewAnswer != null">
                view_answer,
            </if>
            <if test="visibility != null">
                visibility,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            #{id,jdbcType=VARCHAR},
            <if test="anItemLeastNum != null">
                #{anItemLeastNum,jdbcType=INTEGER},
            </if>
            <if test="answerNum != null">
                #{answerNum,jdbcType=INTEGER},
            </if>
            <if test="createDate != null">
                #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dirType != null">
                #{dirType,jdbcType=INTEGER},
            </if>
            <if test="excerptNum != null">
                #{excerptNum,jdbcType=INTEGER},
            </if>
            <if test="htmlPath != null">
                #{htmlPath,jdbcType=VARCHAR},
            </if>
            <if test="isShare != null">
                #{isShare,jdbcType=INTEGER},
            </if>
            <if test="parentId != null">
                #{parentId,jdbcType=VARCHAR},
            </if>
            <if test="sid != null">
                #{sid,jdbcType=VARCHAR},
            </if>
            <if test="surveyDetailId != null">
                #{surveyDetailId,jdbcType=VARCHAR},
            </if>
            <if test="surveyModel != null">
                #{surveyModel,jdbcType=INTEGER},
            </if>
            <if test="surveyName != null">
                #{surveyName,jdbcType=VARCHAR},
            </if>
            <if test="surveyQuNum != null">
                #{surveyQuNum,jdbcType=INTEGER},
            </if>
            <if test="surveyState != null">
                #{surveyState,jdbcType=INTEGER},
            </if>
            <if test="surveyTag != null">
                #{surveyTag,jdbcType=INTEGER},
            </if>
            <if test="userId != null">
                #{userId,jdbcType=VARCHAR},
            </if>
            <if test="viewAnswer != null">
                #{viewAnswer,jdbcType=INTEGER},
            </if>
            <if test="visibility != null">
                #{visibility,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.key.dwsurvey.entity.SurveyDirectory">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_survey_directory
        <set>
            <if test="anItemLeastNum != null">
                an_item_least_num = #{anItemLeastNum,jdbcType=INTEGER},
            </if>
            <if test="answerNum != null">
                answer_num = #{answerNum,jdbcType=INTEGER},
            </if>
            <if test="createDate != null">
                create_date = #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dirType != null">
                dir_type = #{dirType,jdbcType=INTEGER},
            </if>
            <if test="excerptNum != null">
                excerpt_num = #{excerptNum,jdbcType=INTEGER},
            </if>
            <if test="htmlPath != null">
                html_path = #{htmlPath,jdbcType=VARCHAR},
            </if>
            <if test="isShare != null">
                is_share = #{isShare,jdbcType=INTEGER},
            </if>
            <if test="parentId != null">
                parent_id = #{parentId,jdbcType=VARCHAR},
            </if>
            <if test="sid != null">
                sid = #{sid,jdbcType=VARCHAR},
            </if>
            <if test="surveyDetailId != null">
                survey_detail_id = #{surveyDetailId,jdbcType=VARCHAR},
            </if>
            <if test="surveyModel != null">
                survey_model = #{surveyModel,jdbcType=INTEGER},
            </if>
            <if test="surveyName != null">
                survey_name = #{surveyName,jdbcType=VARCHAR},
            </if>
            <if test="surveyQuNum != null">
                survey_qu_num = #{surveyQuNum,jdbcType=INTEGER},
            </if>
            <if test="surveyState != null">
                survey_state = #{surveyState,jdbcType=INTEGER},
            </if>
            <if test="surveyTag != null">
                survey_tag = #{surveyTag,jdbcType=INTEGER},
            </if>
            <if test="userId != null">
                user_id = #{userId,jdbcType=VARCHAR},
            </if>
            <if test="viewAnswer != null">
                view_answer = #{viewAnswer,jdbcType=INTEGER},
            </if>
            <if test="visibility != null">
                visibility = #{visibility,jdbcType=INTEGER},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.key.dwsurvey.entity.SurveyDirectory">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_survey_directory
        set an_item_least_num = #{anItemLeastNum,jdbcType=INTEGER},
        answer_num = #{answerNum,jdbcType=INTEGER},
        create_date = #{createDate,jdbcType=TIMESTAMP},
        dir_type = #{dirType,jdbcType=INTEGER},
        excerpt_num = #{excerptNum,jdbcType=INTEGER},
        html_path = #{htmlPath,jdbcType=VARCHAR},
        is_share = #{isShare,jdbcType=INTEGER},
        parent_id = #{parentId,jdbcType=VARCHAR},
        sid = #{sid,jdbcType=VARCHAR},
        survey_detail_id = #{surveyDetailId,jdbcType=VARCHAR},
        survey_model = #{surveyModel,jdbcType=INTEGER},
        survey_name = #{surveyName,jdbcType=VARCHAR},
        survey_qu_num = #{surveyQuNum,jdbcType=INTEGER},
        survey_state = #{surveyState,jdbcType=INTEGER},
        survey_tag = #{surveyTag,jdbcType=INTEGER},
        user_id = #{userId,jdbcType=VARCHAR},
        view_answer = #{viewAnswer,jdbcType=INTEGER},
        visibility = #{visibility,jdbcType=INTEGER}
        where id = #{id,jdbcType=VARCHAR}
    </update>

    <select id="selectPage" parameterType="map" resultType="com.key.dwsurvey.entity.SurveyDirectory">
        select id, an_item_least_num, answer_num,
        create_date, dir_type, excerpt_num,
        html_path, is_share, parent_id,
        sid, survey_detail_id, survey_model,
        survey_name, survey_qu_num, survey_state,
        survey_tag, user_id, view_answer,
        visibility
        from t_survey_directory
        <trim prefix="WHERE" prefixOverrides="AND |OR ">
            <if test="map.userId != null and map.userId != ''">
                AND user_id = #{map.userId}
            </if>
            <if test="map.visibility != null and map.visibility != ''">
                AND visibility = #{map.visibility}
            </if>
            <if test="map.dirType != null and map.dirType != ''">
                AND dir_type = #{map.dirType}
            </if>
            <if test="map.surveyModel != null and map.surveyModel != ''">
                AND survey_model = #{map.surveyModel}
            </if>
            <if test="map.surveyState != null">
                AND survey_state = #{map.surveyState}
            </if>
             <if test="map.surveyTag != null and map.surveyTag !=''">
                AND survey_tag = #{map.surveyTag}
            </if>
            <if test="map.surveyName != null and map.surveyName != ''">
                <bind name="usrSurveyName" value="'%' + map.surveyName + '%'"/>
                AND survey_name LIKE #{usrSurveyName}
            </if>
        </trim>
        <if test="map.orderBy != null and map.orderDir != null">
            ORDER BY ${map.orderBy} ${map.orderDir}
        </if>
    </select>

    <select id="selectPage1" resultType="com.key.dwsurvey.entity.SurveyDirectory">
    SELECT  id, an_item_least_num, answer_num,
            create_date, dir_type, excerpt_num,
            html_path, is_share, parent_id,
            sid, survey_detail_id, survey_model,
            survey_name, survey_qu_num, survey_state,
            survey_tag, user_id, view_answer,
            visibility
    FROM t_survey_directory ${ew.customSqlSegment}
  </select>
    <select id="findFirst" parameterType="map" resultType="com.key.dwsurvey.entity.SurveyDirectory">
        SELECT id, an_item_least_num, answer_num,
        create_date, dir_type, excerpt_num,
        html_path, is_share, parent_id,
        sid, survey_detail_id, survey_model,
        survey_name, survey_qu_num, survey_state,
        survey_tag, user_id, view_answer,
        visibility
        FROM t_survey_directory
        <trim prefix="WHERE" prefixOverrides="AND |OR ">
            <if test="map.surveyName != null and map.surveyName != ''">
                AND survey_name = #{map.surveyName}
            </if>
            <if test="map.parentId != null and map.parentId != ''">
                AND parent_id = #{map.parentId}
            </if>
            <if test="map.userId != null and map.userId != ''">
                AND user_id = #{map.userId}
            </if>
            <if test="map.id != null and map.id != ''">
                AND id = #{map.id}
            </if>
            <if test="map.createDate != null and map.createDate != ''">
                AND create_date &gt; #{map.createDate}
            </if>
        </trim>
        LIMIT 1
    </select>

    <select id="selectBySid" parameterType="string" resultType="com.key.dwsurvey.entity.SurveyDirectory">
        select *from t_survey_directory where sid=#{sid}
    </select>
</mapper>